<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <!-- http://getbootstrap.com/docs/5.1/ -->
        <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
        <script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!--TODO: is this needed?-->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
        <link rel="manifest" href="/static/favicon/site.webmanifest">

        <link href="/static/styles.css" rel="stylesheet">
        <script src="/static/birdserver.js"></script>

        <!--<link href="/static/bootstrap.min.css" rel="stylesheet">-->

        <title>Birdserver: {% block title %}{% endblock %}</title>

    </head>

    <body>

        <nav class="bg-light border navbar navbar-expand-md navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">
                    <img src="/static/favicon/favicon-32x32.png" alt="Logo" width="32" height="32" class="d-inline-block align-top">
                    <span class="d-inline-block align-top red">Birdserver</span>
                </a>

                <div class="collapse navbar-collapse" id="navbar">
                    {% if session["user_id"] %}
                        <form class="form-inline my-2 my-lg-0 ml-3 d-flex" action="/search" method="GET">
                            <select class="custom-select" id="search_option" name="attr">
                                <option value="common_name">Common Name</option>
                                <option value="scientific_name">Scientific Name</option>
                                <option value="species_code">Species Code</option>
                            </select>
                            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="bird">
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
                            </div>
                        </form>
                        <ul class="navbar-nav ms-auto mt-2">
                            <li class="nav-item"><a class="nav-link" href="/favorites">Favorites</a></li>
                            <li class="nav-item"><a class="nav-link" href="/watch">Watch</a></li>
                            <li class="nav-item"><a class="nav-link" href="/history">History</a></li>
                            <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                        </ul>
                    {% else %}
                        <ul class="navbar-nav ms-auto mt-2">
                            <li class="nav-item"><a class="nav-link" href="/register">Register</a></li>
                            <li class="nav-item"><a class="nav-link" href="/login">Log In</a></li>
                        </ul>
                    {% endif %}
                </div>
            </div>
        </nav>

        {% if get_flashed_messages() %}
            <header>
                <div class="alert alert-primary mb-0 text-center" role="alert">
                    {{ get_flashed_messages() | join(" ") }}
                </div>
            </header>
        {% endif %}

        <main class="container-fluid py-5 text-center">
            {% block main %}{% endblock %}
        </main>

        <footer class="container py-5 footer mb-5 text-center text-muted">
            <div class="scroll-container mb-4">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <p class="mb-0">
                            Bird Sightings in your area, provided by 
                            <a href="https://www.birds.cornell.edu/home" target="_blank" class="text-primary">Cornell Labs</a>
                        </p>
                    </div>
                </div>
                
                <div class="row justify-content-center">
                    <div class="col-md-6">
                        <ul class="list-unstyled bird-list" id="birdList">
                            <!-- Birds will be dynamically populated here -->
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        

    </body>

</html>